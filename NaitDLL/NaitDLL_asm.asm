.code

getPEB proc
	mov rax, qword ptr gs:[60h]	;PEB
	ret
getPEB endp

patchDebug proc
	xor eax, eax
	call getPEB
	movzx eax, byte ptr [rax+2h]

	cmp eax, 0

	je setone

setzero:
	xor bl, bl
	call getPEB
	mov byte ptr [rax+2h], bl

	jmp fine

setone:
	mov bl, 1
	call getPEB
	mov byte ptr [rax+2h], bl

fine:
	ret
patchDebug endp

end